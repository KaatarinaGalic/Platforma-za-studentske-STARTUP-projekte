import{a as x}from"./axios-DsPaXkF5.js";import{p as le,aO as oe,g as se,z as ie,b6 as ue,l as _,v as re,bo as de,a,C as L,j as ce,bp as ge,I as B,aM as fe,m as ve,ad as me,aq as he,at as pe,a_ as be,d as we,e as Pe,au as Ve,h as ye,u as ke,f as xe,aS as Ce,s as _e,aY as H,aT as Le,aJ as U,aC as C,t as v,bq as Q,P as $,a7 as Ie,o as S,c as F,w as r,U as Y,_ as h,$ as I,ak as ee,Y as N,Z as T,a4 as Z,a1 as G,ac as J,S as je,T as Re,F as De,br as Se,R as Ae,a0 as Be,a3 as w,am as Ue,an as Fe}from"./index-N8nsg5h5.js";import{a as Ne,b as Te,c as te,V as j}from"./VTextField-DvOc41fn.js";import{m as Me,V as ae}from"./VCheckboxBtn-CFQTUp3O.js";const Ee=le({...Ne(),...oe(Me(),["inline"])},"VCheckbox"),qe=se()({name:"VCheckbox",inheritAttrs:!1,props:Ee(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,l){let{attrs:d,slots:y}=l;const t=ie(e,"modelValue"),{isFocused:o,focus:s,blur:p}=Te(e),M=ue(),E=_(()=>e.id||`checkbox-${M}`);return re(()=>{const[R,q]=de(d),c=te.filterProps(e),g=ae.filterProps(e);return a(te,L({class:["v-checkbox",e.class]},R,c,{modelValue:t.value,"onUpdate:modelValue":f=>t.value=f,id:E.value,focused:o.value,style:e.style}),{...y,default:f=>{let{id:A,messagesId:z,isDisabled:k,isReadonly:O,isValid:K}=f;return a(ae,L(g,{id:A.value,"aria-describedby":z.value,disabled:k.value,readonly:O.value},q,{error:K.value===!1,modelValue:t.value,"onUpdate:modelValue":W=>t.value=W,onFocus:s,onBlur:p}),y)}})}),{}}}),ze={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"};function Oe(){const e=ce([]);ge(()=>e.value=[]);function l(d,y){e.value[y]=d}return{refs:e,updateRef:l}}const Ke=le({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:B,default:"$first"},prevIcon:{type:B,default:"$prev"},nextIcon:{type:B,default:"$next"},lastIcon:{type:B,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...fe(),...ve(),...me(),...he(),...pe(),...be(),...we({tag:"nav"}),...Pe(),...Ve({variant:"text"})},"VPagination"),We=se()({name:"VPagination",props:Ke(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,l){let{slots:d,emit:y}=l;const t=ie(e,"modelValue"),{t:o,n:s}=ye(),{isRtl:p}=ke(),{themeClasses:M}=xe(e),{width:E}=Ce(),R=_e(-1);H(void 0,{scoped:!0});const{resizeRef:q}=Le(i=>{if(!i.length)return;const{target:n,contentRect:u}=i[0],m=n.querySelector(".v-pagination__list > *");if(!m)return;const b=u.width,D=m.offsetWidth+parseFloat(getComputedStyle(m).marginRight)*2;R.value=A(b,D)}),c=_(()=>parseInt(e.length,10)),g=_(()=>parseInt(e.start,10)),f=_(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):R.value>=0?R.value:A(E.value,58));function A(i,n){const u=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((i-n*u)/n).toFixed(2)))}const z=_(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(f.value<=0)return[];if(f.value===1)return[t.value];if(c.value<=f.value)return U(c.value,g.value);const i=f.value%2===0,n=i?f.value/2:Math.floor(f.value/2),u=i?n:n+1,m=c.value-n;if(u-t.value>=0)return[...U(Math.max(1,f.value-1),g.value),e.ellipsis,c.value];if(t.value-m>=(i?1:0)){const b=f.value-1,D=c.value-b+g.value;return[g.value,e.ellipsis,...U(b,D)]}else{const b=Math.max(1,f.value-3),D=b===1?t.value:t.value-Math.ceil(b/2)+g.value;return[g.value,e.ellipsis,...U(b,D),e.ellipsis,c.value]}});function k(i,n,u){i.preventDefault(),t.value=n,u&&y(u,n)}const{refs:O,updateRef:K}=Oe();H({VPaginationBtn:{color:C(e,"color"),border:C(e,"border"),density:C(e,"density"),size:C(e,"size"),variant:C(e,"variant"),rounded:C(e,"rounded"),elevation:C(e,"elevation")}});const W=_(()=>z.value.map((i,n)=>{const u=m=>K(m,n);if(typeof i=="string")return{isActive:!1,key:`ellipsis-${n}`,page:i,props:{ref:u,ellipsis:!0,icon:!0,disabled:!0}};{const m=i===t.value;return{isActive:m,key:i,page:s(i),props:{ref:u,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:m?e.activeColor:e.color,"aria-current":m,"aria-label":o(m?e.currentPageAriaLabel:e.pageAriaLabel,i),onClick:b=>k(b,i)}}}})),P=_(()=>{const i=!!e.disabled||t.value<=g.value,n=!!e.disabled||t.value>=g.value+c.value-1;return{first:e.showFirstLastPage?{icon:p.value?e.lastIcon:e.firstIcon,onClick:u=>k(u,g.value,"first"),disabled:i,"aria-label":o(e.firstAriaLabel),"aria-disabled":i}:void 0,prev:{icon:p.value?e.nextIcon:e.prevIcon,onClick:u=>k(u,t.value-1,"prev"),disabled:i,"aria-label":o(e.previousAriaLabel),"aria-disabled":i},next:{icon:p.value?e.prevIcon:e.nextIcon,onClick:u=>k(u,t.value+1,"next"),disabled:n,"aria-label":o(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:p.value?e.firstIcon:e.lastIcon,onClick:u=>k(u,g.value+c.value-1,"last"),disabled:n,"aria-label":o(e.lastAriaLabel),"aria-disabled":n}:void 0}});function X(){var n;const i=t.value-g.value;(n=O.value[i])==null||n.$el.focus()}function ne(i){i.key===Q.left&&!e.disabled&&t.value>+e.start?(t.value=t.value-1,$(X)):i.key===Q.right&&!e.disabled&&t.value<g.value+c.value-1&&(t.value=t.value+1,$(X))}return re(()=>a(e.tag,{ref:q,class:["v-pagination",M.value,e.class],style:e.style,role:"navigation","aria-label":o(e.ariaLabel),onKeydown:ne,"data-test":"v-pagination-root"},{default:()=>[a("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&a("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[d.first?d.first(P.value.first):a(v,L({_as:"VPaginationBtn"},P.value.first),null)]),a("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[d.prev?d.prev(P.value.prev):a(v,L({_as:"VPaginationBtn"},P.value.prev),null)]),W.value.map((i,n)=>a("li",{key:i.key,class:["v-pagination__item",{"v-pagination__item--is-active":i.isActive}],"data-test":"v-pagination-item"},[d.item?d.item(i):a(v,L({_as:"VPaginationBtn"},i.props),{default:()=>[i.page]})])),a("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[d.next?d.next(P.value.next):a(v,L({_as:"VPaginationBtn"},P.value.next),null)]),e.showFirstLastPage&&a("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[d.last?d.last(P.value.last):a(v,L({_as:"VPaginationBtn"},P.value.last),null)])])]})),{}}}),Ye={data(){return{search:"",currentPage:1,itemsPerPage:9,projects:[],staticTotalPages:3,loginDialog:!1,email:"",passwordChangeDialog:!1,currentPassword:"",newPassword:"",confirmNewPassword:"",passwordVisible:!1,isLoggedIn:!1,emailRules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Email must be valid"]}},methods:{async handleLogin(){try{const e=await x.post("summitvision.studenti.sum.ba/login",{email:this.email,password:this.currentPassword},{withCredentials:!0});e.data.message==="Login successful"&&(sessionStorage.setItem("isLoggedIn",!0),this.isLoggedIn=!0,this.loginDialog=!1,e.data.role==="admin"?this.$router.push("/admin"):this.$router.push("/projects"))}catch(e){console.error("Login error:",e),alert("Login failed. Please check your credentials and try again.")}},async handleLogout(){try{await x.post("summitvision.studenti.sum.ba/logout",{},{withCredentials:!0}),sessionStorage.removeItem("isLoggedIn"),this.isLoggedIn=!1}catch(e){console.error("Logout error:",e)}},async handleRegister(e){if(!this.isLoggedIn){alert("Please log in to register for a project.");return}console.log("Register button clicked with projectId:",e);try{const l=await x.post("summitvision.studenti.sum.ba/add-to-project",{projectId:e},{withCredentials:!0});await this.fetchProjectsUsr(),l.status===200&&alert("Successfully registered for the project!")}catch(l){console.error("Registration error:",l),alert("Failed to register for the project. Please try again.")}},async handleDeregister(e){if(!this.isLoggedIn){alert("Please log in to deregister from a project.");return}console.log("Deregister button clicked with projectId:",e);try{(await x.delete("summitvision.studenti.sum.ba/remove-from-project",{data:{projectId:e},withCredentials:!0})).status===200&&(alert("Successfully deregistered from the project!"),await this.fetchProjectsUsr())}catch(l){console.error("Deregistration error:",l),alert("Failed to deregister from the project. Please try again.")}},async handleChangePassword(){if(this.newPassword!==this.confirmNewPassword){alert("New passwords do not match");return}try{const e=await x.patch("summitvision.studenti.sum.ba/change-password",{currentPassword:this.currentPassword,newPassword:this.newPassword},{withCredentials:!0});console.log(this.currentPassword,this.newPassword),e.status===200&&(alert("Password changed successfully"),this.passwordChangeDialog=!1)}catch(e){console.error("Change password error:",e)}},fetchProjects(){x.get("summitvision.studenti.sum.ba/projekti").then(e=>{console.log(e.data),this.projects=e.data}).catch(e=>console.error("Error fetching data:",e))},fetchProjectsUsr(){x.get("summitvision.studenti.sum.ba/projekti_korisnik",{withCredentials:!0}).then(e=>{console.log(e.data),this.projects=e.data}).catch(e=>console.error("Error fetching data:",e))},isRegistered(e){return this.projects.some(l=>l.ID_projekta===e&&l.isRegistered)}},computed:{grey(){return ze},filteredProjects(){return this.projects.filter(e=>e.naziv.toLowerCase().includes(this.search.toLowerCase())||e.tehnologije.toLowerCase().includes(this.search.toLowerCase()))},paginatedCards(){const e=(this.currentPage-1)*this.itemsPerPage,l=e+this.itemsPerPage;return this.filteredProjects.slice(e,l)},totalPages(){return Math.ceil(this.filteredProjects.length/this.itemsPerPage)}},mounted(){this.fetchProjects()}},V=e=>(Ue("data-v-61930c29"),e=e(),Fe(),e),Ze=V(()=>w("h1",{class:"text-center my-4 naslov"},"Zakorači u svijet inovativnih studentskih projekata",-1)),Ge=V(()=>w("br",null,null,-1)),Je=V(()=>w("br",null,null,-1)),Xe=V(()=>w("br",null,null,-1)),He=V(()=>w("br",null,null,-1)),Qe=V(()=>w("span",{class:"headline"},"Log In",-1)),$e=V(()=>w("br",null,null,-1)),et=V(()=>w("br",null,null,-1)),tt={class:"headline"};function at(e,l,d,y,t,o){return S(),F(Y,null,{default:r(()=>[Ze,a(v,{color:t.isLoggedIn?"green":"white",class:"mx-2",onClick:l[0]||(l[0]=s=>t.isLoggedIn?o.handleLogout():t.loginDialog=!0),style:{float:"right"}},{default:r(()=>[h(I(t.isLoggedIn?"Log Out":"Log In"),1)]),_:1},8,["color"]),t.isLoggedIn?(S(),F(v,{key:0,color:o.grey,class:"mx-2",onClick:l[1]||(l[1]=s=>t.passwordChangeDialog=!0),style:{float:"right"}},{default:r(()=>[h("Change Password ")]),_:1},8,["color"])):ee("",!0),Ge,Je,Xe,He,a(j,{modelValue:t.search,"onUpdate:modelValue":l[2]||(l[2]=s=>t.search=s),"prepend-icon":"mdi-magnify",label:"Pretraživanje",class:"mx-2","full-width":""},null,8,["modelValue"]),a(J,{modelValue:t.loginDialog,"onUpdate:modelValue":l[7]||(l[7]=s=>t.loginDialog=s),"max-width":"400",class:"login-dialog"},{default:r(()=>[a(N,null,{default:r(()=>[a(T,null,{default:r(()=>[Qe]),_:1}),a(Z,null,{default:r(()=>[a(j,{modelValue:t.email,"onUpdate:modelValue":l[3]||(l[3]=s=>t.email=s),label:"Email",type:"email",required:"",rules:t.emailRules},null,8,["modelValue","rules"]),a(j,{modelValue:t.currentPassword,"onUpdate:modelValue":l[4]||(l[4]=s=>t.currentPassword=s),type:t.passwordVisible?"text":"password",label:"Password",required:""},null,8,["modelValue","type"]),a(qe,{modelValue:t.passwordVisible,"onUpdate:modelValue":l[5]||(l[5]=s=>t.passwordVisible=s),label:"Show Password",class:"mt-2"},null,8,["modelValue"])]),_:1}),a(G,null,{default:r(()=>[a(v,{color:"blue",text:"",onClick:l[6]||(l[6]=s=>t.loginDialog=!1)},{default:r(()=>[h("Close")]),_:1}),a(v,{color:"blue",text:"",onClick:o.handleLogin},{default:r(()=>[h("Log In")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(J,{modelValue:t.passwordChangeDialog,"onUpdate:modelValue":l[11]||(l[11]=s=>t.passwordChangeDialog=s),"max-width":"400"},{default:r(()=>[a(N,null,{default:r(()=>[a(T,null,{default:r(()=>[h(" Change Password ")]),_:1}),a(Z,null,{default:r(()=>[a(j,{modelValue:t.currentPassword,"onUpdate:modelValue":l[8]||(l[8]=s=>t.currentPassword=s),type:t.passwordVisible?"text":"password",label:"Current Password",required:""},null,8,["modelValue","type"]),a(j,{modelValue:t.newPassword,"onUpdate:modelValue":l[9]||(l[9]=s=>t.newPassword=s),type:t.passwordVisible?"text":"password",label:"New Password",required:""},null,8,["modelValue","type"]),a(j,{modelValue:t.confirmNewPassword,"onUpdate:modelValue":l[10]||(l[10]=s=>t.confirmNewPassword=s),type:t.passwordVisible?"text":"password",label:"Confirm New Password",required:""},null,8,["modelValue","type"]),a(v,{onClick:o.handleChangePassword},{default:r(()=>[h("Change Password")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),$e,et,a(Y,{class:"d-flex flex-wrap justify-center"},{default:r(()=>[(S(!0),je(De,null,Re(o.paginatedCards,s=>(S(),F(N,{key:s.naziv,class:"mx-2","max-width":"400",height:"100%"},{default:r(()=>[a(Se,null,{default:r(()=>[a(Ae,{class:"align-end text-white",height:"200px",width:"350px",src:s.slika_url,cover:""},null,8,["src"]),a(T,null,{default:r(()=>[h(I(s.naziv),1)]),_:2},1024),a(Be,null,{default:r(()=>[h(I(s.tehnologije),1)]),_:2},1024),a(G,null,{default:r(()=>[a(v,{onClick:p=>o.handleRegister(s.ID_projekta),disabled:o.isRegistered(s.ID_projekta)},{default:r(()=>[h(I(o.isRegistered(s.ID_projekta)?"Registered":"Register"),1)]),_:2},1032,["onClick","disabled"]),o.isRegistered(s.ID_projekta)?(S(),F(v,{key:0,onClick:p=>o.handleDeregister(s.ID_projekta)},{default:r(()=>[h(" Deregister ")]),_:2},1032,["onClick"])):ee("",!0)]),_:2},1024),a(J,{modelValue:s.dialog,"onUpdate:modelValue":p=>s.dialog=p,"max-width":"500"},{default:r(()=>[a(N,null,{default:r(()=>[a(T,null,{default:r(()=>[w("span",tt,I(s.title),1)]),_:2},1024),a(Z,null,{default:r(()=>[h(I(s.description),1)]),_:2},1024),a(G,null,{default:r(()=>[a(v,{color:"blue",text:"",onClick:p=>s.dialog=!1},{default:r(()=>[h("Close")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(Y,{class:"text-center my-4"},{default:r(()=>[a(We,{modelValue:t.currentPage,"onUpdate:modelValue":l[12]||(l[12]=s=>t.currentPage=s),length:o.totalPages,"total-visible":3,class:"my-4"},null,8,["modelValue","length"])]),_:1})]),_:1})}const nt=Ie(Ye,[["render",at],["__scopeId","data-v-61930c29"]]);export{nt as default};
